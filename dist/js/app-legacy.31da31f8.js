(function(){"use strict";var t={7169:function(t,e,n){n(752),n(3964),n(429),n(6409);var i=n(144),r=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("NavBar"),e("ModalWarning",{ref:"modal_warning"}),e("b-overlay",{attrs:{show:t.busy}},[e("MainSolver",{ref:"main_solver",attrs:{"start-solving":t.startSolving}})],1),e("footer",{staticClass:"fluid-container footer"},[e("p",[t._v(" Frontend v"+t._s(t.version)+" + Backend "+t._s(t.backend_version)+" "),e("br"),t._v(" Made with 🖤️ by "),e("a",{attrs:{href:"https://fabrications.modisch.me",target:"_blank"}},[t._v("Modisch Fabrications")]),t._v(" | "),e("a",{attrs:{href:"https://fabrications.modisch.me/privacy/",target:"_blank"}},[t._v("Privacy Policy")])])])],1)},o=[],a=(n(2918),n(3087)),s=n(2833),l=(n(6646),n(228),n(1694),n(6265),n(9288),n(5765),function(){function t(e,n,i){(0,a.Z)(this,t),this.cut_width=n,this.stocks=e,this.required=i}return(0,s.Z)(t,[{key:"valid",value:function(){return this.stocks instanceof Map&&this.stocks.length>0&&this.stocks.every(Number.isNumber)&&this.stocks.every((function(t){return t.length>0}))&&Number.isInteger(this.cut_width)&&this.cut_width>0&&this.required instanceof Map&&this.required.length>0}}]),t}()),u=function(){function t(e,n,i,r){(0,a.Z)(this,t),this.job=e,this.solver_type=n,this.time_us=i,this.layout=r}return(0,s.Z)(t,[{key:"valid",value:function(){return void 0!==this.job&&this.solver_type&&this.solver_type.length>0&&Number.isInteger(this.time_us)&&this.time_us>0&&Array.isArray(this.layout)&&this.layout.length>0}}]),t}(),c=JSON.parse('{"job":{"cut_width":2,"stocks":[{"length":1500,"name":"infinite"}],"required":[{"length":500,"name":"Part1","quantity":2},{"length":200,"quantity":4}]},"solver_type":"bruteforce","time_us":1868,"layout":[{"stock":{"length":1500,"name":"infinite"},"cuts":[{"length":500,"name":"Part1"},{"length":200},{"length":200},{"length":200}],"trimming":392},{"stock":{"length":1500,"name":"infinite"},"cuts":[{"length":500,"name":"Part1"},{"length":200}],"trimming":796}]}'),h=function(){var t=this,e=t._self._c;return e("b-navbar",{attrs:{print:"",type:"light",variant:"light"}},[e("b-navbar-brand",{attrs:{href:"#"}},[e("img",{staticClass:"d-inline-block align-top",attrs:{id:"logoIcon",alt:"logo",height:"32",src:n(9574)}}),t._v(" CutSolver ")]),e("b-navbar-nav",{staticClass:"ml-auto"},[e("b-nav-item",{attrs:{href:"http://github.com/ModischFabrications",target:"_blank"}},[e("b-icon-github")],1),e("b-nav-text",[t._v(" | ")]),e("b-nav-item",{attrs:{href:"https://www.buymeacoffee.com/modisch",target:"_blank"}},[e("b-icon-cup")],1),e("b-nav-text",[t._v(" | ")]),e("b-nav-item",{on:{click:function(e){return t.$bvModal.show("modal-about")}}},[t._v(" About ")])],1),e("About")],1)},d=[],f=function(){var t=this,e=t._self._c;return e("b-modal",{attrs:{id:"modal-about",centered:"","header-bg-variant":"light","hide-footer":"",scrollable:"",size:"lg",title:"About"}},[e("VueShowdown",{attrs:{markdown:t.about_file_content}})],1)},m=[],b="## What is this?\nThis service collects your input, sends it to a big calculator, allows it to think about it for a while and \ndisplays the received result back to you.\n\nBe aware that this is actually a very hard mathematical problem, see \"bin packing problem\" for technical details. \nThis means that this calculator will only guarantee perfect results up to 10 elements, anything more will fall back to\na fast, but easily fooled algorithm. \n\n## FAQ\n*Could this be done on this website, on my device, in the background?*\n\nThis wouldn't just be possible, it might even be a lot faster. Unfortunately, the calculator was there first ¯\\\\\\_(ツ)_/¯ \n\n*Do you steal my valuable data and sell it to shady criminals on the black market?*\n\nNo, is that something that people do? Do I need to worry about that?  \nTo be honest, I wouldn't know what to do with it.\nIf you have a nice project email me instead, so I can look at your fine work.\n\n[Here](https://legal.modisch.me/en/privacy) is my privacy policy, give it a look for more details (than you could ever possibly want).\n\n## Why did you build this?\nThis project was born out of the need to cut lengths of steel tubing. Ordering everything\npre-cut is easy, but costs at least 30% more. I had everything needed to trim them to size at home, \nbut I needed to know how many stock bars to order and where to cut them. The usual solution is just staring \nat the problem until you see a solution, but that's not really how it should work. \n\nI finished that project years before looking for an answer, but the problem kept arising, which is why \nI finally caved in and developed this tool. \n\n## How can I thank you for this thing?\nTell me how you used this tool, happiness and being praised is the main reason I develop stuff like this. \n\nYou could also donate some spare change, which is even better, but I won't force you to do anything. \nI will be forever grateful if support me in keeping this website up, right now I am paying around 5€/month \nto make this service available for everybody. \n\n[Buy me a pizza](https://www.buymeacoffee.com/modisch)\n\n## Development\nHave a look at [CutSolverFrontend](https://github.com/ModischFabrications/CutSolverFrontend) if you want to see \nhow this website works on the inside. You are welcome to add to it if you see any improvements :) \n\nYou can send also jobs to my backend directly, see [CutSolver](https://github.com/ModischFabrications/CutSolver). \nPlease don't abuse or break it. Feel free to send an issue or merge request if you find a vulnerability.\n",p={name:"About",data:function(){return{about_file_content:b}}},v=p,g=n(1001),_=(0,g.Z)(v,f,m,!1,null,"176bb348",null),y=_.exports,w={name:"NavBar",components:{About:y}},k=w,x=(0,g.Z)(k,h,d,!1,null,"6100e550",null),R=x.exports,S=n(5121),q=function(){var t=this,e=t._self._c;return e("b-modal",{attrs:{id:"modal-warning",centered:"","header-bg-variant":"warning","hide-footer":"",title:"Error"}},[t._v(" "+t._s(t.text)+" ")])},L=[],O={name:"ModalWarning",data:function(){return{text:String}}},E=O,C=(0,g.Z)(E,q,L,!1,null,null,null),I=C.exports,j={methods:{validQuantity:function(t){return Number.isInteger(t)&&t>0},validLength:function(t,e){return Number.isInteger(t)&&t>0&&t<=e},validResult:function(t){return t instanceof u&&t.valid()}}},N=function(){var t=this,e=t._self._c;return e("b-container",{staticClass:"fix_fluid",attrs:{fluid:"true"}},[e("b-row",{attrs:{"align-h":"center"}},[e("b-col",{attrs:{xl:"5"}},[e("SolverInput",{ref:"input"})],1),e("b-col",{attrs:{xl:"*","align-self":"center"}},[e("b-button",{staticClass:"solve_button",attrs:{id:"solve-button",pill:"",size:"lg",type:"submit"},on:{click:t.startSolving}},[t._v(" Solve ")])],1),e("b-col",{attrs:{xl:"5"}},[e("SolverOutput",{ref:"output"})],1)],1)],1)},M=[],V=function(){var t=this,e=t._self._c;return e("div",{staticClass:"solver_input",attrs:{id:"solver-input"}},[e("h2",[t._v("Input")]),e("b-row",[e("b-col",{attrs:{cols:"6"}},[e("b-form-group",{ref:"grp_max_length",attrs:{state:!!t.validLength(t.max_length,t.max_length)&&null,"invalid-feedback":"Length needs to be between 1 and 9999",label:"Maximum length","label-for":"input_max_length"}},[e("b-form-input",{attrs:{id:"input-max_length",state:!!t.validLength(t.max_length,t.max_length)&&null,min:"2",number:"",placeholder:"check your supplier",type:"number"},model:{value:t.max_length,callback:function(e){t.max_length=e},expression:"max_length"}})],1)],1),e("b-col",{attrs:{cols:"6"}},[e("b-form-group",{ref:"grp_cut_width",attrs:{state:!!t.validCut(t.cut_width)&&null,"invalid-feedback":"Width needs to be between 0 and max-length/10",label:"Cutting width","label-for":"input_cut_width"}},[e("b-form-input",{attrs:{id:"input_cut_width",state:!!t.validCut(t.cut_width)&&null,min:"0",number:"",placeholder:"measure a cut",type:"number"},model:{value:t.cut_width,callback:function(e){t.cut_width=e},expression:"cut_width"}})],1)],1)],1),e("DataTable",{ref:"main_output",attrs:{"default-required":t.defaultRequired,"max-length":t.max_length,required:t.required},on:{"update:required":function(e){t.required=e}}})],1)},U=[],P=(n(886),n(4284),JSON.parse('{"Q1":2,"gB":[{"k":1500}],"C1":[{"length":500,"quantity":2,"name":"Part1"},{"length":200,"quantity":4}]}')),A=(n(2506),function(){var t=this,e=t._self._c;return e("b-table",{attrs:{id:"table-input",fields:[{key:"name",sortable:!0},{key:"quantity",sortable:!0},{key:"length",sortable:!0},{key:"delete",label:"",thStyle:{width:"60px"}}],items:t.required,"tbody-transition-props":{name:"flip-list"},bordered:"",fixed:"",hover:"","primary-key":"id",small:"","sort-by":"length","sort-desc":"","tbody-tr-class":"table_row","thead-tr-class":"table_headings"},scopedSlots:t._u([{key:"head(delete)",fn:function(){return[e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:"Clear table",expression:"'Clear table'",modifiers:{hover:!0}}],on:{click:function(e){return t.required.splice(0,t.required.length)}}},[e("b-icon-trash-fill")],1)]},proxy:!0},{key:"cell(name)",fn:function(n){return[e("b-form-input",{attrs:{lazy:"",placeholder:"Part?"},model:{value:n.item.name,callback:function(e){t.$set(n.item,"name",e)},expression:"row.item.name"}})]}},{key:"cell(quantity)",fn:function(n){return[e("b-form-input",{attrs:{state:!!t.validQuantity(n.item.quantity)&&null,lazy:"",min:"1",number:"",placeholder:"1?",type:"number"},model:{value:n.item.quantity,callback:function(e){t.$set(n.item,"quantity",e)},expression:"row.item.quantity"}})]}},{key:"cell(length)",fn:function(n){return[e("b-form-input",{attrs:{max:t.maxLength,state:!!t.validLength(n.item.length,t.maxLength)&&null,lazy:"",min:"1",number:"",placeholder:"100?",type:"number"},model:{value:n.item.length,callback:function(e){t.$set(n.item,"length",e)},expression:"row.item.length"}})]}},{key:"cell(delete)",fn:function(n){return[e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:"Remove entry",expression:"'Remove entry'",modifiers:{hover:!0}}],on:{click:function(e){return t.deleteRow(n.item.id)}}},[e("b-icon-backspace-fill")],1)]}},{key:"custom-foot",fn:function(){return[e("b-th",[e("b-form-input",{ref:"input_new_name",attrs:{placeholder:"enter new name (optional)"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addRow()}},model:{value:t.new_name,callback:function(e){t.new_name=e},expression:"new_name"}})],1),e("b-th",[e("b-form-input",{ref:"input_new_quantity",attrs:{min:"1",number:"",placeholder:"enter new quantity",type:"number",state:!!t.validQuantity(t.new_quantity)||null},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addRow()}},model:{value:t.new_quantity,callback:function(e){t.new_quantity=e},expression:"new_quantity"}})],1),e("b-th",[e("b-form-input",{attrs:{max:t.maxLength,min:"1",number:"",placeholder:"enter new length",type:"number",state:!!t.validLength(t.new_length,t.maxLength)||null},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addRow()}},model:{value:t.new_length,callback:function(e){t.new_length=e},expression:"new_length"}})],1),e("b-th",[e("b-button",{attrs:{disabled:!t.validNewRow()},on:{click:function(e){return t.addRow()}}},[e("b-icon-plus-circle-fill")],1)],1)]},proxy:!0}])})}),T=[],$=(n(7522),n(560),n(9772),{name:"DataTable",mixins:[j],props:{maxLength:{type:Number,required:!0},defaultRequired:{type:Array,required:!0}},data:function(){return{new_name:"",new_length:"",new_quantity:"",required:this.addIndex(this.defaultRequired)}},created:function(){this.$emit("update:required",this.required)},methods:{addIndex:function(t){var e=0;return t.forEach((function(t){return t.id=e++})),t},validNewRow:function(){return this.validLength(this.new_length,this.maxLength)&&this.validQuantity(this.new_quantity)},addRow:function(){if(this.validNewRow()){var t={name:this.new_name,quantity:this.new_quantity,length:this.new_length};t.id=this.required.length,this.required.push(t),this.new_name="",this.new_quantity="",this.new_length="",this.$refs["input_new_quantity"].focus()}},deleteRow:function(t){var e=this.required.findIndex((function(e){return e.id===t}));this.required.splice(e,1)}}}),W=$,Z=(0,g.Z)(W,A,T,!1,null,null,null),B=Z.exports,D={name:"SolverInput",components:{DataTable:B},mixins:[j],data:function(){return{max_length:P.gB[0].k,cut_width:P.Q1,defaultRequired:this.sizes_as_list(P.C1),required:[]}},computed:{job:function(){return new l([{length:Number(this.max_length)}],Number(this.cut_width),this.required)},valid:function(){return this.job.valid()}},methods:{sizes_as_list:function(t){return t.map((function(t){return{name:t.name,quantity:parseInt(t.quantity),length:parseInt(t.length)}}))},validCut:function(t){return Number.isInteger(t)&&t>=0&&t<=this.max_length/10}}},F=D,z=(0,g.Z)(F,V,U,!1,null,"546ac18e",null),Q=z.exports,K=function(){var t=this,e=t._self._c;return e("div",{staticClass:"solver_output",attrs:{id:"solver-output"}},[e("h2",[t._v("Output")]),e("b-overlay",{attrs:{show:null!==t.warning||null===t.result,opacity:"0.95"},scopedSlots:t._u([{key:"overlay",fn:function(){return[null!==t.warning?e("div",{staticClass:"text-center"},[t._v(" Invalid result: "+t._s(t.warning)+" ")]):null===t.result?e("div",{staticClass:"text-center"},[t._v(" Hit [Solve] to get results. ")]):t._e()]},proxy:!0}])},[t.validResult(t.result)?e("div",[e("p",[t._v("Solved using "+t._s(t.result.solver_type)+". Calculation took "+t._s(t.usToMs(t.result.time_us))+"ms.")]),e("LengthsList",{attrs:{"cut-width":t.result.job.cut_width,result:t.result}})],1):e("div",[e("p",[t._v("Solved using pure magic. Calculation took forever.")]),e("LengthsList",{attrs:{"cut-width":t.testresult.job.cut_width,result:t.testresult}})],1)])],1)},H=[],Y=(n(7389),function(){var t=this,e=t._self._c;return null!==t.result?e("b-list-group",t._l(t.result.layout,(function(n,i){return e("b-list-group-item",{key:i},[e("b-progress",{attrs:{max:n.stock.length,height:"2.5rem"}},[t._l(n.cuts,(function(n,i){return[e("b-progress-bar",{key:i,staticClass:"bar_label",attrs:{value:n.length,"show-value":"",variant:"secondary"}},[e("span",[t._v(t._s(n.length))]),n.name?e("span",{staticClass:"bar_label_name"},[t._v(t._s(n.name))]):t._e()]),e("b-progress-bar",{key:-1-i,attrs:{value:t.cutWidth,striped:"",variant:"dark"}})]}))],2)],1)})),1):t._e()}),J=[],G={name:"LengthsList",props:{cutWidth:{type:Number,required:!0},result:{type:u,required:!0}}},X=G,tt=(0,g.Z)(X,Y,J,!1,null,"886f4278",null),et=tt.exports,nt=Object.assign(new u,c),it={name:"SolverOutput",components:{LengthsList:et},mixins:[j],props:{},data:function(){return{result:null,warning:null,testresult:nt}},computed:{},methods:{reset:function(){this.result=null,this.warning=null},setResult:function(t){console.assert(this.validResult(t)),this.result=t,this.warning=null},setWarning:function(t){this.warning=t},usToMs:function(t){return(t/1e3).toFixed(1)}}},rt=it,ot=(0,g.Z)(rt,K,H,!1,null,"438efc23",null),at=ot.exports,st={name:"MainSolver",components:{SolverInput:Q,SolverOutput:at},props:{startSolving:{type:Function,required:!0}}},lt=st,ut=(0,g.Z)(lt,N,M,!1,null,null,null),ct=ut.exports,ht=Object.assign(new u,c),dt="CutSolver",ft=void 0!=={NODE_ENV:"production",VUE_APP_BACKEND_SOLVER_URL:"http://localhost:8000/",VUE_APP_VERSION:"1.1.0",BASE_URL:""}.JEST_WORKER_ID,mt={name:"App",components:{MainSolver:ct,ModalWarning:I,NavBar:R},mixins:[j],data:function(){return{title:dt,version:"1.1.0",backend_version:"?.?.?",job:new l,busy:!1,SOLVER_URL:"http://localhost:8000/"}},mounted:function(){this.setupEnv(),this.getBackendVersion(),this.SOLVER_URL||this.showWarning("Set environment variable 'VUE_APP_BACKEND_SOLVER_URL=http://your.example.com/'")},methods:{setupEnv:function(){this.SOLVER_URL||(this.SOLVER_URL="$VUE_APP_BACKEND_SOLVER_URL","$"!==this.SOLVER_URL[0]?(this.SOLVER_URL.endsWith("/")||this.SOLVER_URL,console.log("Solver URL is now $VUE_APP_BACKEND_SOLVER_URL")):this.showWarning("Magic string substitution for backend url failed."))},getBackendVersion:function(){var t=this;ft||(console.log("Requesting version from "+this.SOLVER_URL+"version"),S.Z.get(this.SOLVER_URL+"version").then((function(e){t.backend_version=e.data,console.log("backend version is "+t.backend_version)})).catch((function(e){console.log(e),e.response?t.showWarning(e.response.data):e.request&&t.showWarning("Server is offline")})))},showWarning:function(t){console.warn(t),this.$refs["modal_warning"].text=t,this.$bvModal.show("modal-warning")},startSolving:function(){this.job=this.$refs["main_solver"].$refs["input"].job,this.busy=!0,ft?this.callMockSolver(this.job):this.callRemoteSolver(this.job)},handleReply:function(t){this.validResult(t)?this.$refs["main_solver"].$refs["output"].setResult(t):this.$refs["main_solver"].$refs["output"].setWarning(t),this.busy=!1},callMockSolver:function(t){var e=this;console.log("faking output for "+t);var n=Math.random()>.2?ht:"fake wrong answer";console.assert(null!==n),setTimeout((function(){e.handleReply(n)}),2e3)},callRemoteSolver:function(t){var e=this;console.log("Requesting solve from "+this.SOLVER_URL+"solve"),S.Z.post(this.SOLVER_URL+"solve",t).then((function(t){e.handleReply(Object.assign(new u,t.data))})).catch((function(t){console.log(t),t.response?e.handleReply(t.response.data):t.request&&e.handleReply("Server is offline")}))}}},bt=mt,pt=(0,g.Z)(bt,r,o,!1,null,null,null),vt=pt.exports,gt=n(9657),_t=n(3017),yt=(n(7024),n(7694)),wt=n.n(yt),kt=n(6906);i["default"].use(gt.XG7),i["default"].use(_t.A7),i["default"].use(wt(),{options:{emoji:!0}}),i["default"].use(kt.Z,{options:{text:"Your browser ({brow_name}) is very outdated, please <a{up_but}>update</a> it!"},test:!1}),i["default"].config.productionTip=!1,new i["default"]({render:function(t){return t(vt)}}).$mount("#app")},9574:function(t,e,n){t.exports=n.p+"img/logo.370ac167.svg"}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={exports:{}};return t[i].call(o.exports,o,o.exports,n),o.exports}n.m=t,function(){var t=[];n.O=function(e,i,r,o){if(!i){var a=1/0;for(c=0;c<t.length;c++){i=t[c][0],r=t[c][1],o=t[c][2];for(var s=!0,l=0;l<i.length;l++)(!1&o||a>=o)&&Object.keys(n.O).every((function(t){return n.O[t](i[l])}))?i.splice(l--,1):(s=!1,o<a&&(a=o));if(s){t.splice(c--,1);var u=r();void 0!==u&&(e=u)}}return e}o=o||0;for(var c=t.length;c>0&&t[c-1][2]>o;c--)t[c]=t[c-1];t[c]=[i,r,o]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){n.p=""}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,i){var r,o,a=i[0],s=i[1],l=i[2],u=0;if(a.some((function(e){return 0!==t[e]}))){for(r in s)n.o(s,r)&&(n.m[r]=s[r]);if(l)var c=l(n)}for(e&&e(i);u<a.length;u++)o=a[u],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return n.O(c)},i=self["webpackChunkcutsolver_frontend"]=self["webpackChunkcutsolver_frontend"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(7169)}));i=n.O(i)})();
//# sourceMappingURL=app-legacy.31da31f8.js.map